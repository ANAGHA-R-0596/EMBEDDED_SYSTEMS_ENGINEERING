/*
 * TIMER0_CTC_1024_PRESCALING.c
 * BLINK AN LED WITH 2 sec DELAY BY USING CTC AND 1024 PRESCALING.
 * Created: 19-09-2025 20:37:41
 * Author : ANAGHA
 */ 



#define F_CPU 16000000UL
#include <avr/io.h>

int main(void)
{
    DDRB |= (1 << DDB5);  //SET DDB5 AS OUTPUT FOR LED.
	TCCR0A |= (1 << WGM01); // CTC MODE 
	OCR0A = 200; // SETPOINT,ANY VALUE LESS THAN 255  SINCE IT'S AN 8 BIT REGISTER.
	TCNT0 = 0; //SET INITIAL VALUE OF TIMER,TCNT0 AS 0. 
	TCCR0B |= (1 << CS00) | (1 << CS02); // 1024 PRESCALING 
	TIFR0 |= (1 << OCF0A); //WRITING 1 TO OCF0A BIT OF TIFR0 REGISTER TO RESET IT.
    
	while (1)
	{
		PORTB ^= (1 << PORTB5);
		for (long int i = 0;i < 156;i++)  // FOR 2 sec DELAY,LOOP HAS TO RUN 156 TIMES IN 1024 PRESCALING(200 * 64us = 12.8ms,2*(1/.0128) = 156)).
		{
			while(!(TIFR0 &(1 << OCF0A))) //FOR GETTING 12.5us DELAY,KEEP LOOPING UNTIL OCF0A BECOMES 1.
			{
				
			}
			TIFR0 |= (1 << OCF0A); //WRITING 1 TO OCF0A BIT OF TIFR0 REGISTER TO RESET IT.
		}
		
	}
	
}



